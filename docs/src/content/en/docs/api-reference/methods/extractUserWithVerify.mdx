---
title: extractUserWithVerify
description: Decrypts an encrypted token and verifies HMAC to securely retrieve the username.
---

import { OptionTable } from "@/components/_table"

# extractUserWithVerify

Type: `extractUserWithVerify(content?: string): Promise<APIResult<string>>`

`extractUserWithVerify()` decrypts an encrypted token and verifies its HMAC to ensure it hasn't been tampered with. This method should be used when security is a priority.

```ts filename="TypeScript" showLineNumbers twoslash
// @noErrors
import { sauthbase } from "sauthbase";
// ---cut---
const result = await sauthbase.use().extractUserWithVerify(token);
```

## Parameters

<OptionTable
options={[
  [
    "content",
    "string",
    "Encrypted token"
  ]
]}
/>

## Return Value

- `Promise<APIResult<string>>`: On success, returns an object containing the username. On failure, returns an object with error information.

## Example Usage

```ts filename="TypeScript" showLineNumbers twoslash
// @noErrors
import { sauthbase } from "sauthbase";
// ---cut---
const token = "encrypted-token-example";
const result = await sauthbase.use().extractUserWithVerify(token);

if (result.success) {
  console.log("Username:", result.data);
} else {
  console.error("Error:", result.code, result.message);
}
```

## Notes

- Always use this method for secure operations.
- HMAC verification ensures the integrity and trustworthiness of the token.
